//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.1
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------
using System;
using UnityEngine;

public class KeyButton
{
	public delegate void Action();
	
	private bool pressed;
	private bool buttonPressed;
	private bool keyPressed;
	
	private Rect rectangle;
	private string name;
	public event Action action;
	public event Action releaseAction;
	private KeyCode keyCode;

	public KeyButton(Rect rectangle , string name, KeyCode keyCode)
	{
		this.rectangle = rectangle;
		this.name = name;
		this.keyCode = keyCode;
	}
	
	public void PerformUpdate(){
		if (Input.GetKeyDown(keyCode)){
			keyPressed = true;
		}else if (Input.GetKeyUp( keyCode) ){
			keyPressed = false;
			releaseAction();
		}
		
		if ( pressed || keyPressed ) {
			action();
		}

		Input.simulateMouseWithTouches = true;

		if (Input.GetMouseButton(0)){
			Debug.Log("yes!!!");
		}

		Vector2 v = new Vector2 ( Input.mousePosition.x, Screen.height - Input.mousePosition.y );
		if ( Input.GetMouseButtonDown(0) && rectangle.Contains(v) ){
			Debug.Log("ButtonDown");
			pressed = true;
		}else if (pressed && Input.GetMouseButtonUp(0)){
			Debug.Log("ButtonUp");
			pressed = false;
			releaseAction();
		}
	}
	
	public void PerformOnGui()
	{
		GUI.Button( rectangle , name );
	}
}


